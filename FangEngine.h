#pragma once
#include "Player.h"
#define PAWN_VALUE 100
#define KNIGHT_VALUE 320
#define BISHOP_VALUE 330
#define ROOK_VALUE 500
#define QUEEN_VALUE 900
#define KING_VALUE 20000


class FangEngine :
    public Player
{
    private:
        int whitePawnPlacement[8][8] = {
            {  0,  0,  0,  0,  0,  0,  0,  0  },
            {  50, 50, 50, 50, 50, 50, 50, 50 },
            {  10, 10, 20, 30, 30, 20, 10, 1  },
            {  5,  5, 10, 25, 25, 10,  5,  5  },
            {  0,  0,  0, 30, 30,  0,  0,  0  },
            {  5, -5,-10,  0,  0,-10, -5,  5  },
            {  5, 10, 10,-20,-20, 10, 10,  5  },
            {  0,  0,  0,  0,  0,  0,  0,  0  }
        };
        int blackPawnPlacement[8][8] = {
            {   0,  0,  0,   0,  0,  0,  0,   0  },
            {  -5,-10,-10,  20, 20,-10,-10,  -5  },
            {  -5,  5, 10,  0,   0,  10,  5, -5  },
            {   0,  0,  0, -30,-30,   0,  0,  0  },
            {  -5, -5,-10, -25,-25, -10, -5, -5  },
            { -10,-10,-20, -30,-30, -20,-10, -1  },
            { -50,-50,-50, -50,-50, -50,-50,-50  },
            {   0,  0,  0,   0,  0,   0,  0,  0  }
        };
        int whiteKnightPlacement[8][8] = {
            { -50,-40,-30,-30,-30,-30,-40,-50 },
            { -40,-20,  0,  0,  0,  0,-20,-40 },
            { -30,  0, 10, 15, 15, 10,  0,-30 },
            { -30,  5, 15, 20, 20, 15,  5,-30 },
            { -30,  0, 15, 20, 20, 15,  0,-30 },
            { -30,  5, 8, 15, 15, 8,  5,-30 },
            { -40,-20,  0,  5,  5,  0,-20,-40 },
            { -50,-40,-30,-30,-30,-30,-40,-50 }
        };
        int blackKnightPlacement[8][8] = {
            { 50,40,30,30,30,30,40,50 },
            { 40,20,  0,  -5,  -5,  0,20,40 },
            { 30,  -5, -8, -15, -15, -8,  -5,30 },
            { 30,  0, -15, -20, -20, -15,  0,30 },
            { 30,  -5, -15, -20, -20, -15,  -5,30 },
            { 30,  0, -10, -15, -15, -10,  0,30 },
            { 40,20,  0,  0,  0,  0,20,40 },
            { 50,40,30,30,30,30,40,50 }
        };
        int whiteBishopPlacement[8][8] = {
            { -20,-10,-10,-10,-10,-10,-10,-20 },
            { -10,  0,  0,  0,  0,  0,  0,-10 },
            { -10,  0,  5, 10, 10,  5,  0,-10 },
            { -10,  5,  5, 10, 10,  5,  5,-10 },
            { -10,  0, 10, 10, 10, 10,  0,-10 },
            { -10, 10, 10, 10, 10, 10, 10,-10 },
            { -10,  5,  0,  0,  0,  0,  5,-10 },
            { -20,-10,-10,-10,-10,-10,-10,-20 }
        };
        int blackBishopPlacement[8][8] = {
            { 20,10,10,10,10,10,10,20 },
            { 10,  -5,  0,  0,  0,  0, -5,10 },
            { 10, -10, -10, -10, -10, -10, -10,10 },
            { 10,  0, -10, -10, -10, -10,  0,10 },
            { 10,  -5,  -5, -10, -10,  -5,  -5,10 },
            { 10,  0,  -5, -10, -10,  -5,  0,10 },
            { 10,  0,  0,  0,  0,  0,  0,10 },
            { 20,10,10,10,10,10,10,20 }
        };
        int whiteRookPlacement[8][8] = {
            {  0,  0,  0,  0,  0,  0,  0,  0 },
            {  5, 10, 10, 10, 10, 10, 10,  5 },
            { -5,  0,  0,  0,  0,  0,  0, -5 },
            { -5,  0,  0,  0,  0,  0,  0, -5 },
            { -5,  0,  0,  0,  0,  0,  0, -5 },
            { -5,  0,  0,  0,  0,  0,  0, -5 },
            { -5,  0,  0,  0,  0,  0,  0, -5 },
            {  0,  0,  0,  5,  5,  0,  0,  0 }
        };
        int blackRookPlacement[8][8] = {
            {  0,  0,  0,  -5,  -5,  0,  0,  0 },
            { 5,  0,  0,  0,  0,  0,  0, 5 },
            { 5,  0,  0,  0,  0,  0,  0, 5 },
            { 5,  0,  0,  0,  0,  0,  0, 5 },
            { 5,  0,  0,  0,  0,  0,  0, 5 },
            { 5,  0,  0,  0,  0,  0,  0, 5 },
            { -5, -10, -10, -10, -10, -10, -10, -5 },
            {  0,  0,  0,  0,  0,  0,  0,  0 }
        };
        int whiteQueenPlacement[8][8] = {
            { -20,-10,-10, -5, -5,-10,-10, -20 },
            { -10,  0,  0,  0,  0,  0,  0, -10 },
            { -10,  0,  5,  5,  5,  5,  0, -10 },
            {  -5,  0,  5,  5,  5,  5,  0,  -5 },
            {   0,  0,  5,  5,  5,  5,  0,  -5 },
            { -10,  5,  5,  5,  5,  5,  0, -10 },
            { -10,  0,  5,  0,  0,  0,  0, -10 },
            { -20,-10,-10, -5, -5,-10,-10, -20 }
        };
        int blackQueenPlacement[8][8] = {
            { 20,10,10, 5, 5,10,10, 20 },
            { 10,  0,  -5,  0,  0,  0,  0, 10 },
            { 10,  -5,  -5,  -5,  -5,  -5,  0, 10 },
            {   0,  0,  -5,  -5,  -5,  -5,  0,  5 },
            {  5,  0,  -5,  -5,  -5,  -5,  0,  5 },
            { 10,  0,  -5,  -5,  -5,  -5,  0, 10 },
            { 10,  0,  0,  0,  0,  0,  0, 10 },
            { 20,10,10, 5, 5,10,10, 20 }
        };
        int whiteKingPlacementM[8][8] = {
            { -30,-40,-40,-50,-50,-40,-40,-30 },
            { -30,-40,-40,-50,-50,-40,-40,-30 },
            { -30,-40,-40,-50,-50,-40,-40,-30 },
            { -30,-40,-40,-50,-50,-40,-40,-30 },
            { -20,-30,-30,-40,-40,-30,-30,-20 },
            { -10,-20,-20,-20,-20,-20,-20,-10 },
            {  20, 20,  0,  0,  0,  0, 20, 20 },
            {  20, 30, 10,  0,  0, 10, 30, 20 }
        };
        int blackKingPlacementM[8][8] = {
            {  -20, -30, -10,  0,  0, -10, -30, -20 },
            {  -20, -20,  0,  0,  0,  0, -20, -20 },
            { 10,20,20,20,20,20,20,10 },
            { 20,30,30,40,40,30,30,20 },
            { 30,40,40,50,50,40,40,30 },
            { 30,40,40,50,50,40,40,30 },
            { 30,40,40,50,50,40,40,30 },
            { 30,40,40,50,50,40,40,30 }
        };
        int whiteKingPlacementE[8][8] = {
            { -50,-40,-30,-20,-20,-30,-40,-50 },
            { -30,-20,-10,  0,  0,-10,-20,-30 },
            { -30,-10, 20, 30, 30, 20,-10,-30 },
            { -30,-10, 30, 40, 40, 30,-10,-30 },
            { -30,-10, 30, 40, 40, 30,-10,-30 },
            { -30,-10, 20, 30, 30, 20,-10,-30 },
            { -30,-30,  0,  0,  0,  0,-30,-30 },
            { -50,-30,-30,-30,-30,-30,-30,-50 }
        };
        int blackKingPlacementE[8][8] = {
            { 50,30,30,30,30,30,30,50 },
            { 30,30,  0,  0,  0,  0,30,30 },
            { 30,10, -20, -30, -30, -20,10,30 },
            { 30,10, -30, -40, -40, -30,10,30 },
            { 30,10, -30, -40, -40, -30,10,30 },
            { 30,10, -20, -30, -30, -20,10,30 },
            { 30,20,10,  0,  0,10,20,30 },
            { 50,40,30,20,20,30,40,50 }
        };

        // A table of common brief openings based on FEN strings.
        std::unordered_map<std::string, std::string> openings;
        // for white
        // play king's pawn
        constexpr openings["rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"] = "e4";
        // play Vienna
        constexpr openings["rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq e6 0 2"] = "Nc3";
        // play open Sicilian
        constexpr openings["rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq c6 0 2"] = "Nf3";
        // for black
        // play king's pawn
        constexpr openings["rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1"] = "e5";
        // play Indian defense
        constexpr openings["rnbqkbnr/pppppppp/8/8/3P4/8/PPP1PPPP/RNBQKBNR b KQkq d3 0 1"] = "Nf6";

    public:
        FangEngine();
        FangEngine(Game* g);
        ~FangEngine();

        Move* search(int depth);
        double minimax(int depth, int trueDepth, bool maxer, double alpha, double beta, Move** move);
        double eval();
};

